// Generated by CoffeeScript 1.7.1
(function() {
  var VkontakteStrategy, app, express, http, passport, server, vkAppId;

  express = require('express');

  http = require('http');

  passport = require('passport');

  VkontakteStrategy = require('passport-vkontakte/strategy');

  vkAppId = process.env.HVZ_VK_APP_ID || 4334105;

  app = express();

  server = http.createServer(app);

  app.get('/', function(req, res) {
    return res.send('hello world');
  });

  passport.use(new VKontakteStrategy({
    clientID: vkAppId,
    clientSecret: process.env.HVZ_VK_SECRET,
    callbackURL: "http://localhost:5000/auth/vkontakte/callback"
  }, function(accessToken, refreshToken, profile, done) {
    return User.findOrCreate({
      vkontakteId: profile.id
    }, function(err, user) {
      return done(err, user);
    });
  }));

  server.listen(process.env.PORT || 5000);

}).call(this);

//# sourceMappingURL=app.map
